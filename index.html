<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <title>Pomodoro statistics for Trello</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/bootstrap-responsive.min.css">
</head>
<body>

    <div class="main-container container">

        <h1>Pomodoro statistics for Trello</h1>


        <div id="loggedout">
            <a id="connect-link" href="#">Connect To Trello</a>
        </div>

        <div id="loggedin">

            <ul class="breadcrumb">
                <li>Logged in as <span id="user-fullname"></span> <span class="divider">/</span></li>
                <li><a id="disconnect" href="#">Log out</a></li>
            </ul>

            <div class="row">

                <div class="span12">
                    <!-- Select which board here -->
                    <div id="board-list">
                    </div>
                    <script id="board-list-tmpl" type="text/x-handlebars-template">
                        <h2>Select board:</h2>
                        <select id="board-list-select" class="wide">
                            <option disabled></option>
                            {{#each boards}}
                                {{#with this}}
                                <option data-url="{{url}}" id="{{id}}">{{name}}</option>
                                {{/with}}
                            {{/each}}
                        </select>
                    </script>
                </div>

            </div><!--/.row-->

            <div id="upload">
                <div class="alert alert-info"><p><b>The Trello API doesn't support downloading comments yet</b>, but instead you can do this:</p>
                    <ol>
                        <li><a target="_blank" class="btn btn-primary btn-mini" id="open-selected-list">
                            Open <span id="selected-list-name">the selected list</span>
                        </a></li> 
                        <li>Click <i>Share, Print and Export</i></li>
                        <li>Click <i>JSON</i></li>
                        <li>Save it to your computer</li>
                        <li>Drag it from your computer to the field below</li>
                    </ol>
                </div>

                <div class="row">
                    <div class="span12">
                        <div id="drop-zone">Drop the .json file here</div>
                    </div>
                </div>

            </div>

            <div id="results">
                
            </div>
            <script id="results-tmpl" type="text/x-handlebars-template">
                <h2>Pomodoro report for <i>{{board.name}}</i></h2>
                {{#with stats}}
                <table class="table table-bordered">
                    <tr><td>Finished pomodoros</td><td>{{pomodoroAmount}}</td></tr>
                </table>
                {{/with}}
            </script>

        </div><!--/#loggedin-->

    </div><!--/.container-->

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script src="https://api.trello.com/1/client.js?key=a11d3c76a7791cf02503f4344bd41ed2"></script>
    <script src="js/handlebars-1.0.0.beta.6.js"></script>
    <script src="js/TrelloStats.js"></script>
    <script>
        TrelloStats.init({ 
            output: $("#output"),  // Debug
            boardList: $("#board-list"), // List of boards
            boardListTmpl: $("#board-list-tmpl"), // Template for list of boards
            listList: $("#list-list"), // List of lists
            listListTmpl: $("#list-list-tmpl"), // Template for list of lists
            upload: $("#upload"), // Div containing upload help and upload field
            openSelectedList: $("#open-selected-list"), // Click element to open selected list in new window
            selectedListName: $("#selected-list-name"),
            dropZone: $("#drop-zone"),
            results: $("#results"),
            resultsTmpl: $("#results-tmpl")
        });

    </script>

<script>

</script>

</body>
</html>
